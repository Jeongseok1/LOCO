로그인, 로그아웃
- 로그아웃 누르면 리다이렉트 페이지를 메인 페이지로 하고 쿠키/캐시 삭제하기       ✅
- 로그인 로그아웃 버튼 메뉴바로 올리기                                      ✅
- 로그아웃시 쿠키 삭제                                                   ✅
- kakaoCallback → “신규 회원”(status="noUser") 처리 후 리다이렉트가 빠짐
- 가입하면 채팅 횟수 기본 25회로 설정 타이머 1시간 30분     (플랜출시 이후)   ✅

- 엑세스/리프레시 쿠키 유효기간 설정
- CSP 설정이나 토큰 바인딩
- 토큰 유효기간 조정    (추후 생각)
- 이중 로그인 방지     (소셜로그인이라 상관없을 듯)
- 약관등 넣기
- 토큰 쿠키 암호화(엑세스 15분 리프레쉬 7일 리프레시 있으면 엑세스 15분씩 연장)


마이페이지
- 마이페이지에서 첫번째 있는 사진이 메인사진이 될것 (굳이?)                 ✅
- 만약 클릭한 프로필이 내프로필이라면 신고 친구추가 빼고 간략 수정 넣기       ✅
- 마이페이지 수정을 본인만 하도록 변경 (어짜피 토큰가져와서 본인만 볼 수 있음) ✅
- 생년월일 빼기 (서비스 전에)                                          ✅
- 닉네임 중복X (해야하는 이유 생각하기/관리자페이지에는 닉네임 밖에 안뜸 검색힘듬)✅
- 성별 누가 언제 뭘로 고쳤는지 알 수 있게 하기✅
- 닉네임 언제 누가 어떤걸로 고쳤는지 알 수 있게 하기✅
- 성별 닉네임 추적한거 개발자 페이지에 버튼 만들기   ✅
- 회원가입시 채팅 횟수 25회 넣기    ✅(30회로 넣음)

- qna 스키마에서 마이페이지로 땡겨올 것    (해야하나? 하는중)
- 사진 올리면 프렌드리스트(메인페이지에 있는 사진)는 바로 바뀌는데 레이아웃에 있는 사진은 새로고침 해야 바뀜 이유찾고 수정하기

- 수정성공 알림 토스트 진행바와 체크표시 색상 고민해보기(웹전체 색상을 결정한 뒤)
- 회원탈퇴 만들기


프로필
- 만약 클릭한 프로필이 내프로필이라면 신고 친구추가 빼고 마이페이지 이동   ✅
- 간략프로필 친구신청 신고기능 추가                 ✅
- 이름 클릭시 간략 프로필 보기                     ✅
- 유저 카드만들기(총 별 표시, 의뢰 받은 수)          ✅
- 프로필 사진없으면 주소 ENV로 URL넣어서 적용시키기   ✅
- PR프로필과 친구목록의 프로필 간략 프로필 카드 등등   ✅
- 간략 프롤필 카드 사진누르면 누른 사진 보기          ✅
- 프로필에 선호게임 넣기?        (일단 롤만 서비스)
- 프로필 페이지도 만들기                           ??
- 온오프 표시                    ✅



메뉴바
- 메뉴바 전역에서 사용하게 main.jsx에 넣기    ✅
- PR페이지 메뉴바로 이동                    ✅
- 상품등록 메뉴바로 올리기                   ✅
- 관리자 페이지 버튼 위로 올리기              ✅
- 매뉴바 위치 이동                          ✅
- 메뉴바 전역파일로 옮기기                   ✅
- 친구요청 쌓여있는 알림창 같은거 만들기        ✅
- 메뉴바 css 깔끔하게                       ✅
- 메뉴바 스크롤해도 상단에 있도록 하기         ✅

피라미드
- 게임별 프로필카드 더보기     (일단 롤만 서비스)
- 별순으로 표시                               ✅
- 보기카테고리(높은별순, 낮은별순, 온라인 순)      ✅
- 이름 클릭시 간략 프로필 보기                  ✅
- 유저 카드만들기(총 별 표시, 의뢰 받은 수)       ✅
- PR페이지 예쁘게 다듬기                       ✅
- PR페이지에 상위 10 한칸씩 움직이기 자동으로     ✅



- 신규유저 기준 정하고 적용하기(최근가입순으로 나열하면 될듯)

- 필터바 스크롤 없애고 동작은 하게 만들기
- 프로필 사진 없을때 노이미지나 대체이미지 넣기?


개발자페이지
- 검색                         ✅
- 유저리스트 이름 성별 나이       ✅
- 클릭하면 프로필 상세보기 및 편집 회원등급 수정 가능 1,2,3   ✅
- 채팅방목록 만들기              ✅
- 개발자 페이지에서 유저검색에 신고횟수 표시                 ✅
- Account Link(소셜 연동) 표시하고 수정 막기              ✅
- Social Info 수정 막기                                ✅
- 플랜타입에 작성이 아니라 드롭다운 넣기                    ✅
- 플랜타입에 데이터 베이스 들어있는만큼 박스로 표시           ✅
- 총 가입자 인원 표시                   ✅
- 친구 표시                            ✅
- 프로필 포토 옆에 앨범 추하기, 그옆에 사진버튼 추가해서 업로드했던 모든 사진 보기    ✅
-버튼으로               ✅
  채팅검색 :            ✅
  유저 클릭             ✅
  > 유저가 참여했던 채팅방 번호 정렬                          ✅
  > 클릭하면 채팅방번호 일치하는 유저들 찾아서 시간별로 세로정렬   ✅
- 개발자 페이지에서 유저검색에 신고횟수 표시                   ✅
- 채팅방 목록에서 랜덤채팅 친구채팅 버튼 만들어서 필터하기        ✅
- 유저 차단목록 열람    ✅
- 닉네임 히스토리 열람   ✅
- 성별 히스토리 열람    ✅
-랜던채팅방 폭파되어버려서 개발자 페이지에 안나옴(해결아닌 해결)✅
- 개발자 페이지에서 유저검색에 신고횟수 표시   ✅
- 채팅방 목록에서 참여자 이름 뒤에 이성 동성 상관없음 뭐눌렀는지 알수 있게 하기  ✅
- 채팅방 목록에서 닉네임(실명) -> 닉네임(플렛폼성별/카카오/네이버 성별로 교체)
- 대화내용에서도 마찬가지


- 채팅내용검색
- 유저 검색에 필터 버튼 만들기 (생년, 월, 일, 성별 각각 필터)
- 신고 횟수 옆에 신고 해당유저 신고 상세보기 버튼(관리자랑 동일하게)
- 참여자 검색

- 삭제한 대화도 보이게 하기    ✅

- 마지막 접속기록 표시

- 유저검색 채팅방검색 사진 등 스크롤 할때마다 더보기 한번에 로드 x
- 사진 대화내용 대화방 등 보안 유저레벨 걸기

사진
- 유저가 업로드한 사진 경로 추적 가능하게 하기(프로필 사진 진행중)     ✅
- 커뮤니티도 적용하기


결제 관리 페이지 만들기

결제(페이)
- 결제 한 유저 구독중 띄우고 유저정보에 구독중 과 구독날짜 넣고(함)
- 스케줄러 돌리기
- (진행중)네이버 페이(사업자 받고 가능)
- 네이버 : 결제 후 데이터베이스 저장, 네이버에서 날아오는 데이터 저장 필드(스키마)만들기
- 카카오페이 주문번호 바꾸기 아마 사용자 거나 상품번호일듯
- 결제 버튼 눌렀을때 데이터 베이스에 저장하지말고 네이버나 카카오에서 응답이 왔을때 데이터베이스에 저장하기
- 카카오 결제 실패 리다이렉트 페이지 만들기(함)

플랜
- 플랜 결제 후 결제된 플랜 구독 버튼 막기
- 플랜 API구조 확인(효율적이지 않은듯)

---------------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------------
모니터링 할 수 있는 페이지 만들기
 - 관리자 페이지에서 버튼 누르면 나오도록?

네이버 로그아웃 후 로그인시 토큰이 삭제가 안되는지 바로 네이버 기존아이디로 로그인이 됨
재로그인시 다시 네이버 아이디 비밀번호 치고 로그인 하도록 알아보고 수정하기

설정(상단에 아이콘으로)
 - 친구신청 막는 버튼 아이폰처럼 버튼만들고 위에 작은 메세지 띄우기 막았습니다 받습니다 ✅
 - 알림 화면에 안뜨게 하기 버튼(알림 목록에만 쌓이게) ✅
 - 알림목록 하단에 전체삭제 버튼 목록길이 만큼 기다랗게 만들기? ✅
 - 프로필 pr페이지에 비공개

 - 알림 전체 삭제 ✅

로그인 모달창으로 만들기   ✅

별점 초기화 (한달에 한번? 1일 16일에 한번씩?)(현재 한달에 한번씩) ✅

온오프 표시          ✅

채팅방 목록에서 참여자 이름 뒤에 이성 동성 상관없음 뭐눌렀는지 알수 있게 하기    ✅
 - 랜덤챗 컴포넌트에서 유저가 선택한걸 맵으로 챗 룸 스키마에 꼽기


배너(배너 공간 만들고 배너 수정할 수 있는 페이지 만들기)(일단 홈페이지 설명 배너)(이정석)
 - 배너와 url연결        ✅

새소식(뉴스) 메뉴 추가해서 이벤트 공지 등
 - 공지, 이벤트 페이지(커뮤니티처럼? ex)배그, 메이플)  ✅
 - 공지 사진 위치 마음대로 넣을 수 있도록 하기

듀오찾기
- 매칭 대기 듀오찾기 페이지에서 대기 ✅
- 롤 전적 : 킬 데스 어시 라인 표시 , 아이콘 테두리에 승 패 색상 표시 ✅
- 랜덤 채팅 로딩 중 친구 채팅 열면 친구가 참가 목록에 잠시 실시간 추가가 되는 오류 - 소켓 수정 ✅

친구목록, 친구 채팅 목록
- 사이드에서 확인 하게 ✅
- 사이드에서 친구채팅 눌렀을때는 사이드창 안꺼지게 수정✅
- 채팅창을 사이드에 추가하는 거 생각 ✅ 추가 했음
- 최근 메시지, 안읽은 메시지 갯수, 최근 메시지 날짜 ✅
- 친구 채팅창 친구 채팅 목록 옆에 바로뜨게 ✅
- 온라인, 오프라인 친구 리스트 나눠서 보이게, 드롭다운해서 보이게

회원가입 페이지에 도메인으로 접근 불가 회원이 아닐때, 소셜을 거친 후에만 접근가능하게
뿐만아니라 URL로 접근 불가능하게 할 페이지 생각하기
커뮤니티
- 최다조회, 최다댓글 length 에러 뜨는거 해결 ✅

=======================================================================================
출시 한 이후 하기

유저한테 채팅(공지나 문의 등, 별도의 페이지? 개발자 페이지에)

전체한테 채팅뿌리기(공지나 문의 등, 별도의 페이지? 개발자 페이지에)

재밌을거같은거?
- 유저와 개발자 강제매칭

- network 에 json 데이터 노출 됨⚠️
이용약관, 개인정보 처리, 기타 정보들 넣는 페이지 만들기
채팅 디자인 카카오톡처럼 (출시후 1.1v)
---------------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------------

전적검색
- 티어 상승 하락시 어떻게 업데이트 할건지 생각해보기 ✅ (불러올 때 업데이트 되어서 보임)
- 아이콘 이미지 가져와서 디자인에 사용 ✅
- 유저스키마에 임시로 롤닉네임 추가, 후에 롤은 소셜로그인 할 것
- 유저스키마에 티어 저장

채팅, 랜덤채팅
- 진행중인 랜덤채팅 복귀버튼 ✅
- 만약 클릭한 프로필이 내프로필이라면 신고 친구추가 빼고 간략 수정 넣기 ✅
- 랜덤채팅사이트에 인원수 선택 박스로 바꾸기 ✅
- 랜덤채팅 차단 차단 볼 수 있는 페이지 차단 해제 ✅
- 친구채팅방 삭제 (삭제해도 채팅방 삭제안됨 ex)채팅방에 있었던 인원끼리 채팅한다면 동일 채팅방에서 진행) ✅
- 채팅 남은 횟수 11/25(몇회 남았는지 최대몇회인지 표시해놓기) ✅
- 친구 채팅방 위치 생각하기 친구목록쪽으로 넣을지 ✅
- 친구아니어도 1ㄷ1 대화 가능하게 하기
- 가입하면 채팅 횟수 기본 25회로 설정 타이머 2시간 ✅
- 친구채팅 차단 랜덤채팅 차단 차단 볼 수 있는 페이지 차단 해제 ✅
- 친구채팅방 삭제 (삭제해도 채팅방 삭제안됨 ex)채팅방에 있었던 인원끼리 채팅한다면 동일 채팅방에서 진행) ✅
- 채팅 남은 횟수 11/25(몇회 남았는지 최대몇회인지 표시해놓기) ✅
- 채팅 1회 충전까지 몇분 몇초 남았는지 표시 ✅
- 메인 화면에서 비로그인시 친구목록창에 로딩중.. 말고 로그인유도글로 바꾸기? ✅

- 친구 채팅방 위치 생각하기 친구목록쪽으로 넣을지
- 개발자가 공지 메세지나 개인 메세지 가능하게 만들기
- 참여자가 이성, 동성, 상관없음 뭐눌렀는지 알 수 있게 하기 ✅



관리자페이지(QNA)
- 신고상세내용 ✅
- 채팅을 신고하면 관리자한테 일부 채팅 내용이 보이게 하기 ✅
- 최근날짜순으로 정렬 ✅
- QNA작성 날짜시간 ✅
- 답변날짜 시간 ✅
- 플랜에 맞게 채팅 최대 횟수 지정 ✅
- 채팅 1회 충전까지 몇분 몇초 남았는지 표시 ✅
- 친구아니어도 1ㄷ1 대화 가능하게 하기 (PR에서?)
- 별점 초기화 스케줄러 ✅
- 신고 최근 순으로 정렬 ✅


관리자페이지
- 신고상세내용 ✅
- 채팅을 신고하면 관리자한테 일부 채팅 내용이 보이게 하기 ✅
- 신고 상새내용에 채팅으로 신고되었을 시 신고당한 채팅 방 띄우기 ✅
- 친구채팅은 앞뒤 날짜로 채팅 띄우기 ✅ - 이거 수정 하다가 삭제된 채팅방 조회 못하는거 수정 해야함 (수정 완)✅
- 신고목록에 오래된 순 필터 ✅
- System message css 수정 ✅


신고
- 사진신고 강제 내리기(이후 정지)✅
- 사진신고 당시 사진이 관리자에게 보이게 하기
- 채팅을 신고하면 관리자한테 일부 채팅 내용이 보이게 하기 ✅
- 정지 채팅 금지(기간동안) ✅
- 정지당한체로 채팅하려고하면 안내(현재 정지중입니다. 언제풀리는지 띄우기) ✅
- 신고 삭제는 레벨3 이상만 할 수 있도록 하기 관리자는 신고 내용 삭제 불가 ✅
- 대상 위치로 이동 옆에 버튼하나 만들어서
  역대 가해자에 대한 신고내용 종합으로 볼 수 있는
  모달창이나 팝업창 하나 만들기(컴포넌트로 만들어서 적용시키기?검색기능 있는데 굳이?)


커뮤니티
- 글, 댓글 이미지 사이즈 조절 ✅
- 게시글 이미지 배열로 수정 ✅
- 게시글 또는 댓글등 삭제해도 기록남게 하기 ✅
- 글, 댓글 쓸때 프로필 비공개 또는 익명 ✅
- detail 에서 총 댓글 수 대댓글, 대대댓글 수 까지 총합 표시 ✅
- 친구, 채팅 알림 디자인 수정 ✅
- 채팅 알림 드롭다운 텍스트 넘치면 ...으로 표시 ✅
- 친구 채팅창 열린 상태일때 친구 삭제하면 채팅창 닫히게, 삭제x ✅
- 친구 신청 왔을때 신청 온 사람 프로필 확인하고 결정 할 수 있게 ✅
- 소켓 연결 중복되어서 한 사용자 당 두개 뜨는거 수정 ✅
- 개발요청 카테고리 만들기 (개발자한테 하고싶은 말) ✅
- 친구 신청 받을때 프로필에 친구 신청 버튼 -> 친구 신청 받기 로 변경 ✅
- 투표 기능 만들기✅
- 최다 조회, 댓글 최근 일주일 안의 글들로 구성되게 수정, 일단 일주일 기준으로 해놓고 나중에 또 수정 ✅
- 추천순 정렬도 추가 ✅
- 날짜별로 볼 수 있는 기능 추가 ✅


사진
- 유저가 업로드한 사진 경로 추적 가능하게 하기(프로필 사진 진행중)     ✅
- 커뮤니티도 적용하기
- 나중에 aws s3버켓 사용 해야함

설정페이지(마이페이지에 -> 메인 헤더에 설정 버튼으로 추가)
- 친구신청 막는 버튼 아이폰처럼 버튼만들고 위에 작은 메세지 띄우기 막았습니다 받습니다 ✅
- 알림 화면에 안뜨게 하기 버튼(알림 목록에만 쌓이게) ✅
- 알림목록 하단에 전체삭제 버튼 목록길이 만큼 기다랗게 만들기? ✅
- 로그인 후 시작할 때 활성화, 비활성화 상태에 따라 버튼 표시되게 수정 ✅

QNA
- 작성자 익명, 게시글 관리자만 볼 수 있게도 설정 할 수 있게 ✅


---------------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------------


클라이언트

관리자페이지
- 채팅방 목록 컨테이너 안에 모두 친구 랜덤 필터 버튼 만들기
- 대화 내용 컨테이너 안에 채팅 검색 넣기

상품등록         OO
- 상품등록버튼 관리자 페이지 안으로 옮기기, lv3부터 들어갈 수 있게 바꾸기


관리자/개발자     OOO
-lv확인후 진입가능하게 하기

Qna
- 삭제 : 작성한 사람과 관리자 개발자만 삭제가능 (삭제는 개발자만 하도록 하기 삭제 누가 했는지 로그 남기기)
- 클릭하면 모달창 x 아래 화살표 같은 느낌으로 길어지면서 본문내용 나오게

신고
- 삭제해도 기록 남기게 하기 (삭제는 개발자만 하도록 하기 삭제 누가 했는지 로그 남기기) 신고 히스토리 생성?



전반적인 보안을 강화하기 위해 아래 항목들도 함께 고려해보시는 걸 추천드립니다:
HTTPS 적용 & 쿠키 보안 설정

Secure, HttpOnly, SameSite=Strict 옵션이 달린 쿠키로 토큰을 내려보내세요.

TLS(HTTPS)를 반드시 사용해야 토큰 탈취 위험을 줄일 수 있습니다.

토큰 만료·갱신 전략

JWT에는 적절한 exp(만료 시간)를 넣고, 리프레시 토큰 방식을 도입하세요.

단일 페이지 앱이라도 장기 세션을 그대로 유지하면 탈취 시 위험이 커집니다.

입력값 검증 & 탈출(escaping)

모든 req.body, req.query 파라미터에 대해 express-validator 같은 라이브러리로 스키마 검증을 걸어야 합니다.

NoSQL 인젝션, XSS 같은 공격을 사전에 차단할 수 있습니다.

Rate Limiting / Brute-Force 방지

express-rate-limit 등을 이용해 한 IP가 과도하게 API를 호출하는 걸 막으세요.

로그인, 민감 정보 조회 같은 엔드포인트에는 더 엄격하게 걸어두면 좋습니다.

HTTP 헤더 보안 강화

helmet 미들웨어로 Content-Security-Policy, X-Frame-Options 등을 설정하세요.

클릭재킹, MIME 스니핑, XSS 공격 위험을 줄여줍니다.

CORS 정책

cors 설정에서 허용된 오리진을 제한하고, 필요하다면 자격증명 포함 여부(credentials)를 명시하세요.

로깅 & 모니터링

인증·권한 실패, 서버 오류 같은 이벤트를 별도 로거에 기록해 두시면, 이상 징후를 빨리 탐지할 수 있습니다.




이용약관 로폼


가장 먼저 고쳐야 할 치명적 에러

chatService.saveMessage() 가 객체 전체를 sender에 할당 → 스키마 타입 불일치로 런타임 예외 발생
 chatService.js (서비스 로직)
4.1. 치명적: saveMessage의 sender 처리
js
코드 복사
// service.saveMessage 내부
if (typeof sender === 'string') {
  const user = await User.findById(sender);
  // …
  sender = {
    _id: user._id,
    nickname: user.nickname,
    /* …기타 프로필 필드… */
  };
}
const newMessage = new ChatMessage({ chatRoom, sender, text });
문제: 스키마에서 sender 필드는 Schema.Types.ObjectId 타입입니다.

하지만 위 코드에서는 전체 사용자 객체를 할당하려 시도하므로, Mongoose가 CastError: Cast to ObjectId failed for value "[object Object]" 를 던질 가능성이 매우 높습니다.

해결책:

단순화: sender에는 user._id만 저장

js
코드 복사
sender = user._id;
추가 필드로 프로필을 남기고 싶다면, 스키마에 별도 senderInfo: { nickname: String, … } 같은 필드를 만들어 사용